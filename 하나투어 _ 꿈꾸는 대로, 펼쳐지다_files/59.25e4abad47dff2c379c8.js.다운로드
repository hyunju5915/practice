(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{1610:function(e,t,n){"use strict";var r=n(3),o=n(9),c=n(83),d=n(84),l=n(141),f=n(142),h=n(104),y=n(25),v=n(29),m=(n(37),n(19),n(20),n(17),n(8),n(23),n(10),n(282),n(16),n(21),n(68)),O=n(58),I=n(196),S=n.n(I),j=n(457),E=(n(1832),n(2014)),R=n(40);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var w=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},D=n(118),T=Object(E.a)(O.name),_=Object(R.a)(),C=D.create({baseURL:"//".concat(_.apiHost),withCredentials:!0,timeout:1e3});var A={components:{instanceRenderer:j.a},validate:function(e){var t=e.route.path;return!!e.store.getters["page/seedSvcPage"](t)||(console.error("Not found DP "+e.route.path),!1)},layout:function(e){var t=e.store.state.site;if(e.store.state.page.fixingLayout)return e.store.state.page.fixingLayout;var n=e.route.path;if(t&&t.theme){var r=e.store.state.page.pages[n];if(r){if("desktop"===e.store.state.device.type&&r.layout&&r.layout.label)return r.layout.label;if("mobile"===e.store.state.device.type&&r.layoutMobile&&r.layoutMobile.label)return r.layoutMobile.label}return"".concat(t.theme.value,"/default")}return"default"},head:function(e){if(this.$store.state.page){var meta=[],t={},n=this.instanceWrapper;if(!n)return{};Array.isArray(n.seoConfigs)&&(meta=n.seoConfigs.filter((function(e){return!!e})).map((function(e){return{hid:e.name,name:e.name,content:e.content,property:e.property||void 0}})));var r={};"desktop"===this.$store.state.device.type&&n.background?r=n.background:"mobile"===this.$store.state.device.type&&n.mobileBackground&&(r=n.mobileBackground),r.cssColor&&(t["background-color"]=r.cssColor),r.image&&(t["background-image"]="url(".concat(this.$cmsSrc(r.image.label),")")),r.imageSizingCustom&&(t["background-size"]=r.imageSizingCustom),r.imageSizing&&(t["background-size"]=r.imageSizing.value?r.imageSizing.value:"");var head={bodyAttrs:{style:Object.keys(t).map((function(e){return"".concat(e,":").concat(t[e])})).join(";")},meta:Object(y.a)(meta)};return n.title&&(head.title=n.title),head}return{}},deactivated:function(){this.$destroy()}},$=function(e){Object(l.a)(y,e);var t,n,f,h=P(y);function y(){var e;return Object(c.a)(this,y),(e=h.apply(this,arguments)).dragging=!1,e.pageType=!0,e}return Object(d.a)(y,[{key:"instanceWrapper",get:function(){var e=this.$route.path;return this.$store.state.page.pages[e]}},{key:"setPageData",value:function(e){this.$store.commit(O.name+"/"+O.types.SET_SEED,e)}},{key:"authContext",get:function(){return this.$route.query.authContext||"mng"}},{key:"fetchPageData",value:(f=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.request({url:"/"+this.authContext+"/svcPage/read",timeout:1e5,params:x({id:this.$store.state.page.pageId},S.a)});case 2:return t=e.sent,e.abrupt("return",t.data.item);case 4:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"updatedSVCPageData",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.fetchPageData();case 4:return e.t1=e.sent,e.t0.setPageData.call(e.t0,e.t1),e.abrupt("return");case 9:e.prev=9,e.t2=e.catch(0),console.error(e.t2);case 12:console.error("Failed apply a updated service page.");case 13:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return n.apply(this,arguments)})},{key:"beforeDestroy",value:function(){}},{key:"updated",value:function(){}},{key:"mounted",value:function(){var e=this;this.LISTEN_EDITOR_MESSAGE&&(this.LISTEN_EDITOR_MESSAGE("updatedPage",function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(data){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return data.inEditorFlashDataStore,t.next=3,e.updatedSVCPageData();case 3:e.$nextTick((function(){e.EMIT_EDITOR_MAIN_EVENT("rendered-vue-page"),"function"==typeof data.nextTick&&data.nextTick()}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.LISTEN_EDITOR_MESSAGE("flashUpdatedPage",function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(data){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=data.inEditorFlashDataStore,e.hoveringInstanceId=data.hoveringInstanceId,t.next=4,e.$store.commit(O.name+"/"+O.types.UPDATE_EDITOR_FLASH_DATA_STORE,n);case 4:e.$nextTick((function(){e.EMIT_EDITOR_MAIN_EVENT("flash-rendered-vue-page")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.LISTEN_EDITOR_MESSAGE("notice",function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(data){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:data.key,data.data;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.LISTEN_EDITOR_MESSAGE("change-component-hover-state",Object(o.a)(regeneratorRuntime.mark((function t(){var data,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:data=n.length>0&&void 0!==n[0]?n[0]:{},e.hoveringInstanceId=data.hoveringInstanceId,void 0!==data.dragging&&(e.dragging=data.dragging);case 3:case"end":return t.stop()}}),t)})))))}},{key:"beforeRouteUpdate",value:function(e,t,n){}},{key:"render",value:function(e){var t,n,o,c,d=this.$store.state.device.type,l=!1;"mobile"!==d&&"app"!==d||(l=!0),n=this.instanceWrapper[l?"mobileInstance":"instance"]?e("instance-renderer",{props:{instance:this.instanceWrapper[l?"mobileInstance":"instance"].item,deployShape:this.instanceWrapper.deployShape,renderScript:this.instanceWrapper.renderScript,options:{isRoot:!0,area:"body",zIndex:2,defaultHeight:"50vh"}}}):this.instanceWrapper.deployShape&&"script"===this.instanceWrapper.deployShape?e("instance-renderer",{props:{deployShape:this.instanceWrapper.deployShape,renderScript:this.instanceWrapper.renderScript,options:{isRoot:!0,area:"body",zIndex:2,defaultHeight:"50vh"}}}):e("div",{},["Invalid Page"]),o=this.instanceWrapper[l?"mobileHeadInstance":"headInstance"]?e("instance-renderer",{props:{instance:this.instanceWrapper[l?"mobileHeadInstance":"headInstance"].item,options:{isRoot:!0,area:"head",zIndex:3,defaultHeight:"20px"}}}):null,c=this.instanceWrapper[l?"mobileFootInstance":"footInstance"]?e("instance-renderer",{props:{instance:this.instanceWrapper[l?"mobileFootInstance":"footInstance"].item,options:{isRoot:!0,area:"foot",zIndex:1,defaultHeight:"100px"}}}):null;var f=this.$store.state.device.type;return e("div",{attrs:{id:"editablePageContents"},class:(t={},Object(r.a)(t,f,!0),Object(r.a)(t,"contents",!0),Object(r.a)(t,"type","mobile"===f),Object(r.a)(t,"dragging",this.dragging),Object(r.a)(t,"expand",void 0!==this.hoveringInstanceId&&null!==this.hoveringInstanceId),t)},[o,n,c])}}],[{key:"asyncData",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{hoveringInstanceId:null});case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),y}(m.c);w([T.Action],$.prototype,"updateEditorFlashDataStore",void 0),w([T.Action],$.prototype,"setSeed",void 0),$=w([Object(m.a)(A)],$),t.a=$},1832:function(e,t,n){var content=n(1833);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(14).default)("53187e79",content,!0,{sourceMap:!1})},1833:function(e,t,n){(e.exports=n(13)(!1)).push([e.i,"#editablePageContents.dragging [data-system-property-slot],#editablePageContents.dragging [data-system-property-type=children],#editablePageContents.dragging [data-system-property-type=scene-children],#editablePageContents.expand [data-system-property-slot],#editablePageContents.expand [data-system-property-type=children]{min-height:50px}*{box-sizing:border-box}",""])}}]);