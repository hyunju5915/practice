(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{1971:function(t,e,o){"use strict";o.r(e);o(20),o(28),o(0),o(5);var n=o(11),r=(o(30),o(24)),c=o(40),l={mixins:[r.a],data:function(){return{CFD0004List:[],checkStorage:{},intervalCfd0004Obj:null,onAdd:"",activeChatting:!1,chatUrl:"/consultChat",isCobrand:this.$store.state.fx.isCobrand}},computed:{},mounted:function(){this.getLatestProduct()},watch:{activeChatting:function(t){t?window.addEventListener("message",this.closeChat):window.removeEventListener("message",this.closeChat)}},methods:{titleShort:function(t){if(t.length>10)return t.subStr(0,10)+"..."},openClose:function(){" on"===this.onAdd?this.onAdd="":this.onAdd=" on"},dateCheck:function(t){var e=new Date,o=e.getFullYear(),n=e.getMonth()-2,r=e.getDate();1==(""+n).length&&(n="0"+n),1==(""+r).length&&(r="0"+r);var c=o+""+n+r,a=t.split(".");return a[0]+""+a[1]+a[2].substr(0,3)>c},close:function(){this.hide(),this.$emit("hide")},getLatestProduct:function(){var t=this;this.intervalCfd0004Obj=setInterval((function(){t.getLocalStorage()}),3e3)},getLocalStorage:function(){var t,e=this.$fx.getLocalStorage("CFD0004");e&&-1==e.indexOf("|**")&&(console.log("DELLOCAL"),this.delAllLocalStorage());try{t=e?this.CookieDepthSolve(e):{}}catch(e){t={}}var o=t.lastSrchProdList;if(o||(o=[]),this.CFD0004List=o,o.length>=6)for(var a=5;a<=o.length;a++)this.delLocalStorage(a)},CookieDepthSolve:function(t){var e={},o=t.split("|**");return"["===o[1].substr(0,1)||"{"===o[1].substr(0,1)?e[o[0]+""]=JSON.parse(o[1]):e[o[0]+""]=o[1],e},delAllLocalStorage:function(){localStorage.removeItem("CFD0004"),this.CFD0004List=[],this.CFD0004List.length=0},delLocalStorage:function(t){var e=this.CFD0004List;e.splice(t,1),this.$fx.setLocalStorage("CFD0004","lastSrchProdList|**"+JSON.stringify(e))},movePage:function(path){this.$fx.go(path),this.hide(),this.$emit("hide")},movePageHtl:function(t){var e={hotelCode:t.prodCd,countryCode:t.countryCode,checkInDate:t.depDt,checkOutDate:t.arrDt};t.hasOwnProperty("rooms")&&(e.rooms=t.rooms),console.log("#####최근본#####",t),this.$fx.go("/trp/htl/CHPC0HTL0200M200",e,{type:"GET"}),this.hide(),this.$emit("hide")},dateChck:function(t){return null==t||""==t?null:t.replace(":","")},btnChattingToggle:function(){if(console.log(this.activeChatting),console.log("this.CFD0004List ========> ",this.CFD0004List),console.log("chatUrl ====> ",this.chatUrl),n.a.isEmpty(this.$refs.consultChat.src)){var t=Object(c.a)(),e="";this.CFD0004List.length>0&&(e="".concat(t.protocol,"//").concat(location.hostname),n.a.isEmpty(location.port)?e+=this.CFD0004List[0].ldpgUrlAdrs:e+=":".concat(location.port).concat(this.CFD0004List[0].ldpgUrlAdrs),console.log("productUrl =======> ",e)),this.$refs.consultChat.src="".concat(this.chatUrl,"?url=").concat(encodeURIComponent(location.href),"&productUrl=").concat(encodeURIComponent(e))}console.log("this.$refs.consultChat.src ==> ",this.$refs.consultChat.src),this.activeChatting?this.activeChatting=!1:this.activeChatting=!0},closeChat:function(t){"chatPopupClose"===t.data&&(this.activeChatting=!1)}},deactivated:function(){this.$destroy()}},h=o(2),component=Object(h.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:"right_fixed"+t.onAdd},[t.isCobrand?t._e():o("div",{staticClass:"chatting",class:t.activeChatting?"active":""},[o("button",{staticClass:"btn_chatting",attrs:{type:"button"},on:{click:t.btnChattingToggle}},[o("span",{staticClass:"text"},[t._v("채팅상담")])]),t._v(" "),o("div",{staticClass:"box_chatting"},[o("iframe",{ref:"consultChat",attrs:{frameborder:"0"}})])]),t._v(" "),o("a",{class:"btn_recent_items"+t.onAdd,attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openClose()}}},[t._v("최근 본 상품("),o("em",[t._v(t._s(t.CFD0004List.length))]),t._v(")")]),t._v(" "),o("div",{staticClass:"list_wrap"},[0!==t.CFD0004List.length?o("a",{staticClass:"btn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.delAllLocalStorage()}}},[t._v("모두지우기")]):t._e(),t._v(" "),0===t.CFD0004List.length?o("p",[t._v("최근 본 상품이 없습니다.")]):t._e(),t._v(" "),0!==t.CFD0004List.length?o("ul",[t._l(t.CFD0004List,(function(e,n){return["PKG"===e.prodAttr&&!0===t.dateCheck(e.lastSrchDate)?o("li",[o("p",{staticClass:"date"},[t._v(t._s(e.lastSrchDate.substr(0,10)))]),t._v(" "),o("p",{staticClass:"img"},[o("a",{attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.movePage(e.ldpgUrlAdrs)}}},[o("fx-img",{attrs:{src:e.thmblmgUrlAdrs,title:"임시이미지",imgSize:"M"}}),t._v(" "),null!=e.prodKorName?o("span",[t._v(t._s(e.prodKorName.length>15?e.prodKorName.substr(0,15)+"...":e.prodKorName))]):o("span",[t._v("없음")])],1)]),t._v(" "),o("p",{staticClass:"price"},[o("em",[t._v(t._s(e.prodPrc)),o("span",[t._v("원~")])])]),t._v(" "),o("a",{staticClass:"cls",attrs:{href:"#"},on:{click:function(e){return t.delLocalStorage(n)}}},[t._v("최근본 상품에서 삭제")])]):t._e(),t._v(" "),"HTL"===e.prodAttr&&!0===t.dateCheck(e.lastSrchDate)?o("li",[o("p",{staticClass:"date"},[t._v(t._s(e.lastSrchDate.substr(0,10)))]),t._v(" "),o("p",{staticClass:"img"},[o("a",{attrs:{href:"#none"},on:{click:function(o){return o.preventDefault(),t.movePageHtl(e)}}},[o("fx-img",{attrs:{src:e.thmblmgUrlAdrs,title:"임시이미지",imgSize:"M"}}),t._v(" "),null!=e.prodKorName?o("span",[t._v(t._s(e.prodKorName.length>15?e.prodKorName.substr(0,15)+"...":e.prodKorName))]):o("span",[t._v("없음")])],1)]),t._v(" "),e.prodPrc>0?o("p",{staticClass:"price"},[o("em",[t._v(t._s(t._f("formatAmt")(e.prodPrc))),o("span",[t._v("원~")])])]):t._e(),t._v(" "),o("a",{staticClass:"cls",attrs:{href:"#none"},on:{click:function(e){return e.preventDefault(),t.delLocalStorage(n)}}},[t._v("최근본 상품에서 삭제")])]):t._e()]}))],2):t._e()]),t._v(" "),o("a",{staticClass:"btn_go_top",attrs:{href:"#"}},[t._v("TOP")])])}),[],!1,null,null,null);e.default=component.exports}}]);